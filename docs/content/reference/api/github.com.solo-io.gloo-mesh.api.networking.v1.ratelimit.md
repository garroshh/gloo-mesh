
---

title: "ratelimit.proto"

---

## Package : `networking.mesh.gloo.solo.io`



<a name="top"></a>

<a name="API Reference for ratelimit.proto"></a>
<p align="right"><a href="#top">Top</a></p>

## ratelimit.proto


## Table of Contents
  - [Descriptor](#networking.mesh.gloo.solo.io.Descriptor)
  - [IngressRateLimit](#networking.mesh.gloo.solo.io.IngressRateLimit)
  - [RateLimit](#networking.mesh.gloo.solo.io.RateLimit)
  - [RatelimitConfig](#networking.mesh.gloo.solo.io.RatelimitConfig)
  - [SetDescriptor](#networking.mesh.gloo.solo.io.SetDescriptor)
  - [SimpleDescriptor](#networking.mesh.gloo.solo.io.SimpleDescriptor)

  - [RateLimit.Unit](#networking.mesh.gloo.solo.io.RateLimit.Unit)






<a name="networking.mesh.gloo.solo.io.Descriptor"></a>

### Descriptor
A descriptor is a list of key/value pairs that the rate limit server uses to select the correct rate limit to use when limiting. Descriptors are case-sensitive.<br>Each configuration contains a top level descriptor list and potentially multiple nested lists beneath that. The format is:<br>``` descriptors:   - key: <rule key: required>     value: <rule value: optional>     rate_limit: (optional block)       unit: <see below: required>       requests_per_unit: <see below: required>     descriptors: (optional block)       - ... (nested repetition of above) ```<br>Each descriptor in a descriptor list must have a key. It can also optionally have a value to enable a more specific match. The `rate_limit` block is optional and, if present, sets up an actual rate limit rule. If the rate limit is not present and there are no nested descriptors, then the descriptor is effectively whitelisted. Otherwise, nested descriptors allow more complex matching and rate limiting scenarios.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| key | string |  | The key of the descriptor. This field is required. |
  | value | string |  | Optional value for the descriptor. If omitted, the server will create a rate limit for each value that is provided for this descriptor in rate limit requests. |
  | rateLimit | [networking.mesh.gloo.solo.io.RateLimit]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.RateLimit" >}}) |  | Optional rate limit rule for the descriptor. |
  | weight | uint32 |  | Each top-level Descriptor defines a new Rate Limit "rule". When a request comes in, rate limit actions are applied to the request to generate descriptor tuples that are sent to the rate limit server. If any rule is triggered then the entire request returns HTTP 429 Too Many Requests.<br>Typically, rule priority is signalled by nesting descriptors, as the most specific rule match for the descriptor tuple generated by the rate limit actions is used. In rare cases this is too restrictive; instead you can set rule priority by setting weights on your descriptors.<br>All rules with the highest weight are processed, if any of these rules trigger rate limiting then the entire request will return a 429. Rules that are not considered for rate limiting are ignored in the rate limit server, and their request count is not incremented in the rate limit server cache.<br>Defaults to 0; thus all rules are evaluated by default. |
  | alwaysApply | bool |  | A boolean override for rule priority via weighted rules. Any rule with `alwaysApply` set to `true` will always be considered for rate limiting, regardless of the rule's weight. The rule with the highest weight will still be considered. (this can be a rule that also has `alwaysApply` set to `true`)<br>Defaults to false. |
  





<a name="networking.mesh.gloo.solo.io.IngressRateLimit"></a>

### IngressRateLimit
Basic rate-limiting API


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| authorizedLimits | [networking.mesh.gloo.solo.io.RateLimit]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.RateLimit" >}}) |  |  |
  | anonymousLimits | [networking.mesh.gloo.solo.io.RateLimit]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.RateLimit" >}}) |  |  |
  





<a name="networking.mesh.gloo.solo.io.RateLimit"></a>

### RateLimit
A `RateLimit` specifies the actual rate limit that will be used when there is a match.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| unit | [networking.mesh.gloo.solo.io.RateLimit.Unit]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.RateLimit.Unit" >}}) |  |  |
  | requestsPerUnit | uint32 |  |  |
  





<a name="networking.mesh.gloo.solo.io.RatelimitConfig"></a>

### RatelimitConfig
Ratelimit filter config.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| domain | string |  | Ratelimit domain |
  | descriptors | [networking.mesh.gloo.solo.io.Descriptor]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.Descriptor" >}}) |  |  |
  | setDescriptors | [networking.mesh.gloo.solo.io.SetDescriptor]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.SetDescriptor" >}}) |  |  |
  | ratelimitBasic | [networking.mesh.gloo.solo.io.IngressRateLimit]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.IngressRateLimit" >}}) |  | Config for rate-limiting using simplified (gloo-specific) API |
  





<a name="networking.mesh.gloo.solo.io.SetDescriptor"></a>

### SetDescriptor
A setDescriptor is a list of key/value pairs that the rate limit server uses to select the correct rate limit to use when limiting with the set style. Descriptors are case-sensitive.<br>Each configuration contains a simpleDescriptor list and a rateLimit. The format is:<br>``` set_descriptors:  - simple_descriptors: (optional block)      - key: <rule key: required>        value: <rule value: optional>      - ... (repetition of above)    rate_limit:      requests_per_unit: <see below: required>      unit: <see below: required>    always_apply: <bool value: optional>  - ... (repetition of above) ```<br>Each SetDescriptor defines a new Rate Limit "rule". When a request comes in, rate limit actions are applied to the request to generate descriptor tuples that are sent to the rate limit server. If any rule is triggered then the entire request returns HTTP 429 Too Many Requests.<br>The `rate_limit` block sets up an actual rate limit rule.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| simpleDescriptors | [][networking.mesh.gloo.solo.io.SimpleDescriptor]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.SimpleDescriptor" >}}) | repeated | Simple descriptor key/value pairs. |
  | rateLimit | [networking.mesh.gloo.solo.io.RateLimit]({{< versioned_link_path fromRoot="/reference/api/github.com.solo-io.gloo-mesh.api.networking.v1.ratelimit#networking.mesh.gloo.solo.io.RateLimit" >}}) |  | Rate limit rule for the descriptor. |
  | alwaysApply | bool |  | Typically, rule priority is signalled by rule ordering, as the first rule match for the descriptor tuple generated by the rate limit actions is used.<br>In some cases this is too restrictive; A boolean override can be specified. Any rule with `alwaysApply` set to `true` will always be considered for rate limiting, regardless of the rule's place in the ordered list of rules. The first rule to match will still be considered. (This can be a rule that also has `alwaysApply` set to `true`.)<br>If any of these rules trigger rate limiting then the entire request will return a 429. Rules that are not considered for rate limiting are ignored in the rate limit server, and their request count is not incremented in the rate limit server cache.<br>Defaults to false. |
  





<a name="networking.mesh.gloo.solo.io.SimpleDescriptor"></a>

### SimpleDescriptor
A simpleDescriptor is a list of key/value pairs that the rate limit server uses to select the correct rate limit to use when limiting with the set style. Descriptors are case-sensitive.<br>The format is:<br>```  simple_descriptors:    - key: <rule key: required>      value: <rule value: optional>    - ... (repetition of above) ```<br>Each simpleDescriptor in a simpleDescriptor list must have a key. It can also optionally have a value to enable a more specific match.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| key | string |  | The key of the descriptor. This field is required. |
  | value | string |  | Optional value for the descriptor. If omitted, the server will create a rate limit for each value that is provided for this descriptor in rate limit requests. |
  




 <!-- end messages -->


<a name="networking.mesh.gloo.solo.io.RateLimit.Unit"></a>

### RateLimit.Unit


| Name | Number | Description |
| ---- | ------ | ----------- |
| UNKNOWN | 0 |  |
| SECOND | 1 |  |
| MINUTE | 2 |  |
| HOUR | 3 |  |
| DAY | 4 |  |


 <!-- end enums -->

 <!-- end HasExtensions -->

 <!-- end services -->

